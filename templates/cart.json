{
  "sections": {
    "cart-items": {
      "type": "main-cart-items",
      "custom_css": [
        ".section-template--20156185084235__cart-items-padding {display: none;}"
      ],
      "settings": {
        "padding_top": 0,
        "padding_bottom": 36
      }
    },
    "1699276968511d60c0": {
      "type": "apps",
      "custom_css": [

      ],
      "settings": {
        "include_margins": true
      }
    },
    "16992769751b4f4323": {
      "type": "apps",
      "blocks": {
        "5579896a-9af4-41db-a946-3f59a78f8324": {
          "type": "shopify:\/\/apps\/hura-theme-blocks\/blocks\/html-block\/5b288e0f-cbe6-47c0-909d-b0904b0ad6dd",
          "settings": {
            "custom_html": "",
            "custom_liquid": "{{ 'quantity-popover.css' | asset_url | stylesheet_tag }}\n<script src=\"{{ 'cart.js' | asset_url }}\" defer=\"defer\"><\/script>\n<script src=\"{{ 'quantity-popover.js' | asset_url }}\" defer=\"defer\"><\/script>\n\n<cart-items class=\"page-width section-template--20663475601739__cart-items-padding\">\n  \n\n  {%- if cart == empty -%}\n    <div class=\"cart__warnings\">\n        <h1 class=\"cart__empty-text\">Košík je prázdný<\/h1>\n        <a href=\"\/collections\/all\" class=\"button\">\n          Pokračovat v nákupu\n        <\/a><\/div>\n{%- else -%}\n<div class=\"title-wrapper-with-link\">\n    <h1 class=\"title title--primary\">Váš košík<\/h1>\n    <a href=\"\/collections\/all\" class=\"underlined-link\">Pokračovat v nákupu<\/a>\n  <\/div>\n{%- endif -%}\n\n\n  <form action=\"{{ routes.cart_url }}\" id=\"CartDrawer-Form\" class=\"cart__contents cart-drawer__form\" method=\"post\">\n    <div id=\"CartDrawer-CartItems\" class=\"drawer__contents js-contents\">\n      {%- if cart != empty -%}\n        <div class=\"drawer__cart-items-wrapper\">\n          <table class=\"cart-items\" role=\"table\">\n            <tbody role=\"rowgroup\">\n              {%- for item in cart.items -%}\n                <tr id=\"CartDrawer-Item-{{ item.index | plus: 1 }}\" class=\"cart-item\" role=\"row\">\n                    <td class=\"cart-item__media\" role=\"cell\" headers=\"CartDrawer-ColumnProductImage\">\n                        {% if item.image %}\n                          <a href=\"{{ item.url }}\" class=\"cart-item__link\" tabindex=\"-1\" aria-hidden=\"true\"> <\/a>\n                          <img\n                            class=\"cart-item__image\"\n                            src=\"{{ item.image | image_url: width: 300 }}\"\n                            alt=\"{{ item.image.alt | escape }}\"\n                            loading=\"lazy\"\n                            width=\"150\"\n                            height=\"{{ 150 | divided_by: item.image.aspect_ratio | ceil }}\"\n                          >\n                        {% endif %}\n                      <\/td>\n    \n                      <td class=\"cart-item__details\" role=\"cell\" headers=\"CartDrawer-ColumnProduct\">\n                        <a href=\"{{ item.url }}\" class=\"cart-item__name h4 break\">\n                          {{- item.product.title | escape -}}\n                        <\/a>\n                        {%- if item.original_price != item.final_price -%}\n                          <div class=\"cart-item__discounted-prices\">\n                            <s class=\"cart-item__old-price product-option\">{{- item.original_price | money -}}<\/s>\n                            <strong class=\"cart-item__final-price product-option\">{{ item.final_price | money }}<\/strong>\n                          <\/div>\n                        {%- else -%}\n                          <div class=\"product-option\">{{ item.original_price | money }}<\/div>\n                        {%- endif -%}\n    \n                        {%- if item.product.has_only_default_variant == false\n                          or item.properties.size != 0\n                          or item.selling_plan_allocation != null\n                        -%}\n                          <dl>\n                            {%- if item.product.has_only_default_variant == false -%}\n                              {%- for option in item.options_with_values -%}\n                                <div class=\"product-option\">\n                                  <dt>{{ option.name }}:<\/dt>\n                                  <dd>{{ option.value }}{% unless forloop.last %}, {% endunless %}<\/dd>\n                                <\/div>\n                              {%- endfor -%}\n                            {%- endif -%}\n    \n                            {%- for property in item.properties -%}\n                              {%- assign property_first_char = property.first | slice: 0 -%}\n                              {%- if property.last != blank and property_first_char != '_' -%}\n                                <div class=\"product-option\">\n                                  <dt>{{ property.first }}:<\/dt>\n                                  <dd>\n                                    {%- if property.last contains '\/uploads\/' -%}\n                                      <a href=\"{{ property.last }}\" class=\"link\" target=\"_blank\">{{ property.last | split: '\/' | last }}<\/a>\n                                    {%- else -%}\n                                      {{ property.last }}\n                                    {%- endif -%}\n                                  <\/dd>\n                                <\/div>\n                              {%- endif -%}\n                            {%- endfor -%}\n                          <\/dl>\n    \n                          <p class=\"product-option\">{{ item.selling_plan_allocation.selling_plan.name }}<\/p>\n                        {%- endif -%}\n    \n                        <ul class=\"discounts list-unstyled\" role=\"list\" aria-label=\"{{ 'customer.order.discount' | t }}\">\n                          {%- for discount in item.line_level_discount_allocations -%}\n                            <li class=\"discounts__discount\">\n                              {{ discount.discount_application.title }}\n                            <\/li>\n                          {%- endfor -%}\n                        <\/ul>\n                      <\/td>\n    \n\n                      <td class=\"cart-item__quantity\" role=\"cell\" headers=\"CartDrawer-ColumnQuantity\">\n  {%- liquid\n    assign has_qty_rules = false\n    if item.variant.inventory_quantity > 1 or item.variant.inventory_quantity > 1 or item.variant.inventory_quantity != null\n      assign has_qty_rules = true\n    endif\n\n    assign has_vol_pricing = false\n    if item.variant.quantity_price_breaks.size > 0\n      assign has_vol_pricing = true\n    endif\n  -%}\n  <quantity-popover>\n    <div class=\"cart-item__quantity-wrapper quantity-popover-wrapper\">\n      <div class=\"quantity-popover-container{% if has_qty_rules or has_vol_pricing %} quantity-popover-container--hover{% endif %}\">\n        <quantity-input class=\"quantity cart-quantity\">\n          <button class=\"quantity__button no-js-hidden\" name=\"minus\" type=\"button\" onclick=\"changeNumber('{{ item.variant.id }}', -1)\">\n            <span class=\"visually-hidden\">\n              {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}\n            <\/span>\n            {% render 'icon-minus' %}\n          <\/button>\n          <input\n            class=\"quantity__input\"\n            type=\"number\"\n            data-quantity-variant-id=\"{{ item.variant.id }}\"\n            name=\"updates[]\"\n            value=\"{{ item.quantity }}\"\n            {% # theme-check-disable %}\n            data-cart-quantity=\"{{ cart | item_count_for_variant: item.variant.id }}\"\n            min=\"1\"\n            {% if item.variant.inventory_quantity != null %}\n              max=\"{{ item.variant.inventory_quantity }}\"\n            {% endif %}\n            step=\"1\"\n            {% # theme-check-enable %}\n            aria-label=\"{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}\"\n            id=\"Drawer-quantity-{{ item.index | plus: 1 }}\"\n            data-index=\"{{ item.index | plus: 1 }}\"\n          >\n        <button class=\"quantity__button no-js-hidden\" name=\"plus\" type=\"button\"  onclick=\"changeNumber('{{ item.variant.id }}', 1)\" >\n            <span class=\"visually-hidden\">\n              {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}\n            <\/span>\n            {% render 'icon-plus' %}\n          <\/button>\n          \n        <\/quantity-input>\n      <\/div>\n      <cart-remove-button\n        id=\"CartDrawer-Remove-{{ item.index | plus: 1 }}\"\n        data-index=\"{{ item.index | plus: 1 }}\"\n        >\n        <button\n            type=\"button\"\n            class=\"button button--tertiary cart-remove-button\"\n            aria-label=\"{{ 'sections.cart.remove_title' | t: title: item.title }}\"\n            data-variant-id=\"{{ item.variant.id }}\"\n        >\n            {% render 'icon-remove' %}\n        <\/button>\n        <\/cart-remove-button>\n    <\/div>\n    \n    <div\n      id=\"CartDrawer-LineItemError-{{ item.index | plus: 1 }}\"\n      class=\"cart-item__error\"\n      role=\"alert\"\n    >\n    \n    <\/div>\n  <\/quantity-popover>\n  {%- if item.variant.inventory_quantity != null -%}\n    <p>Max quantity for variant is: {{ item.variant.inventory_quantity }}<\/p>\n  {%- else -%}\n    <p>No maximum quantity specified for this variant.<\/p>\n  {%- endif -%}\n<\/td>\n\n                  <td class=\"cart-item__totals right\" role=\"cell\" headers=\"CartDrawer-ColumnTotal\">\n                    <!-- ... (unchanged code) ... -->\n                  <\/td>\n                <\/tr>\n              {%- endfor -%}\n            <\/tbody>\n          <\/table>\n        <\/div>\n      {%- endif -%}\n      <p id=\"CartDrawer-LiveRegionText\" class=\"visually-hidden\" role=\"status\"><\/p>\n      <p id=\"CartDrawer-LineItemStatus\" class=\"visually-hidden\" aria-hidden=\"true\" role=\"status\">\n        {{ 'accessibility.loading' | t }}\n      <\/p>\n    <\/div>\n    <div id=\"CartDrawer-CartErrors\" role=\"alert\"><\/div>\n  <\/form>\n<\/cart-items>\n\n{% for item in cart.items %}\n  <p id=\"currentNumberDisplay-{{ item.variant.id }}\">currentNumber: {{ item.quantity | default: 1 }}<\/p>\n  <p>Price per unit: {{ item.final_price | money }}<\/p>\n  <p id=\"totalPriceDisplay-{{ item.variant.id }}\">Total Price: {{ item.quantity | default: 1 | times: item.final_price | money: '0,0 ' }} Kč<\/p>\n{% endfor %}\n\n<script>\n  \/\/ Initialize variables\n  const currentNumbers = {\n    {% assign totalQuantity = 0 %}\n    {% for item in cart.items %}\n      '{{ item.variant.id }}': {\n        quantity: {{ item.quantity | default: 1 }},\n        maxQuantity: {{ item.variant.inventory_quantity | default: 'null' }}\n      },\n      {% assign totalQuantity = totalQuantity | plus: item.quantity %}\n    {% endfor %}\n  };\n\n  \/\/ Create a variable to hold the current quantity for each variant\n  const currentQuantities = {};\n\n  \/\/ Create a variable to hold the product prices for each variant\n  const productPrices = {\n    {% for item in cart.items %}\n      '{{ item.variant.id }}': {{ item.final_price }},\n    {% endfor %}\n  };\n\n  \/\/ Function to change the number based on the provided value for a specific variant\n  function changeNumber(variantId, value) {\n    const currentNumber = currentNumbers[variantId];\n\n    \/\/ Calculate the potential new quantity\n    const potentialQuantity = currentNumber.quantity + value;\n\n    \/\/ Ensure the number is within the allowed range (1 to maxQuantity)\n    currentNumber.quantity = Math.max(1, Math.min(potentialQuantity, currentNumber.maxQuantity || potentialQuantity));\n\n    \/\/ Save the current quantity to the variable\n    currentQuantities[variantId] = currentNumber.quantity;\n\n    document.getElementById('currentNumberDisplay-' + variantId).innerText = 'currentNumber: ' + currentNumber.quantity;\n\n    \/\/ Calculate and display total price for the specific variant\n    const totalPrice = currentNumber.quantity * productPrices[variantId];\n    document.getElementById('totalPriceDisplay-' + variantId).innerText = 'Total Price: ' + (totalPrice \/ 100).toLocaleString('cs-CZ', { style: 'currency', currency: 'CZK', minimumFractionDigits: 0, maximumFractionDigits: 0 });\n\n    \/\/ Update the total quantity and display styles\n    updateTotalQuantity();\n  };\n\n  \/\/ Function to update the total quantity for all products and display styles\n  function updateTotalQuantity() {\n    let updatedTotalQuantity = 0;\n\n    for (const variantId in currentNumbers) {\n      updatedTotalQuantity += currentNumbers[variantId].quantity;\n    }\n\n    \/\/ Display the updated total quantity\n    const totalQuantityDisplayFlex = document.getElementById('totalQuantityDisplayFlex');\n    const totalQuantityDisplayNone = document.getElementById('totalQuantityDisplayNone');\n\n    if (updatedTotalQuantity > 3) {\n      document.getElementById('totalQuantityDisplayFlex').innerText = 'Total Quantity for all products: ' + updatedTotalQuantity;\n    } else {\n      document.getElementById('totalQuantityDisplayFlex').innerText = 'pepik: ' + updatedTotalQuantity;\n    }\n\n    \/\/ If the total quantity is zero, hide the other elements\n    const otherElements = document.querySelectorAll('.cart-item');\n    otherElements.forEach(element => {\n      element.style.display = updatedTotalQuantity > 0 ? 'block' : 'none';\n    });\n  }\n\n  \/\/ Ensure that the total price is initially set when the page loads\n  window.onload = function() {\n    for (const variantId in currentNumbers) {\n      const currentNumber = currentNumbers[variantId];\n      const totalPrice = currentNumber.quantity * productPrices[variantId];\n      document.getElementById('totalPriceDisplay-' + variantId).innerText = 'Total Price: ' + (totalPrice \/ 100).toLocaleString('cs-CZ', { style: 'currency', currency: 'CZK', minimumFractionDigits: 0, maximumFractionDigits: 0 });\n    }\n\n    \/\/ Initial total quantity display and display styles\n    updateTotalQuantity();\n  };\n\n  function validateMaxQuantity(input) {\n    var maxQuantity = parseInt(input.getAttribute('max'));\n    if (!isNaN(maxQuantity) && input.value > maxQuantity) {\n      input.value = maxQuantity;\n    }\n  }\n<\/script>\n\n<!-- Display the total quantity after the loop -->\n<p id=\"totalQuantityDisplayFlex\" style=\"display: flex;\">Total Quantity for all products: {{ totalQuantity }}<\/p>\n<p id=\"totalQuantityDisplayNone\" style=\"display: none;\">There's nothing in the cart<\/p>\n\n  <!-- Add this in your HTML where you want to display the maximum quantity \n  {% for item in cart.items %}\n    <p id=\"maxQuantityDisplay-{{ item.variant.id }}\">Max quantity for variant is: {{ item.variant.inventory_quantity }}<\/p>\n  {% endfor %}-->"
          }
        }
      },
      "block_order": [
        "5579896a-9af4-41db-a946-3f59a78f8324"
      ],
      "settings": {
        "include_margins": true
      }
    },
    "cart-footer": {
      "type": "main-cart-footer",
      "blocks": {
        "subtotal": {
          "type": "subtotal",
          "settings": {
          }
        },
        "buttons": {
          "type": "buttons",
          "settings": {
          }
        }
      },
      "block_order": [
        "subtotal",
        "buttons"
      ],
      "custom_css": [
        ".tax-note {display: none;}",
        ".Jk692hbroeK5lg6b_t4v {display: none;}",
        ".cart__footer > div:only-child {margin-left: auto; margin-right: auto;}",
        ".button:how {box-shadow: none;}"
      ],
      "settings": {
        "padding_top": 20,
        "padding_bottom": 40
      }
    }
  },
  "order": [
    "cart-items",
    "1699276968511d60c0",
    "16992769751b4f4323",
    "cart-footer"
  ]
}
